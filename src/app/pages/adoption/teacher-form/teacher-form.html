<template args="model">
    <iframe name="form-response" id="form-response" src="" width="0" height="0"></iframe>
    <form accept-charset="UTF-8" class="form {model.hasBeenSubmitted ? 'submitted' : ''}" target="form-response"
     action="https://{model.salesforce.salesforceHome}/servlet/servlet.WebToLead?encoding=UTF-8" method="post">
        <div>
            <input name="utf8" type="hidden" value="âœ“">
            <input type="hidden" name="oid" value="{model.salesforce.oid}">
            <input type="hidden" name="lead_source" value="Adoption Form">
            <input type="hidden" name="Role__c" value="{model.userRole}">
            <input type="hidden" name="00NU00000053nzR">
            <input type="hidden" name="00NU00000055spw">
        </div>
        <div class="text-content">
            <div
                class="grouping single-column {model.currentSection === 1 ? '' : 'hidden'}"
            >
                <plug-in data-id="contactInfo" skip="true"></plug-in>
                <div class="flexrow"><button type="button" class="btn primary next">Next</button></div>
            </div>
            <div
                class="grouping {model.currentSection === 2 ? '' : 'hidden'}"
            >
                <h2>Which books are you currently using?</h2>
                <div class="helper">Select all that apply.</div>
                <div each="subject in model.subjects">
                    <label class="field-label">{subject}</label>
                    <div class="two-columns" data-subject={subject}>
                        <div
                         each="book in model.booksBySubject(subject)"
                         data-book-checkbox="{$item}"
                         skip="true"
                        >
                        </div>
                    </div>
                </div>
                <div
                 if="model.hasBeenSubmitted && model.selectedBooks().length === 0"
                 class="invalid-message"
                >
                    Select at least one book
                </div>
                <div class="hint">
                    Don't see your book? Fill out our <a href="/interest">interest form</a>.
                </div>
                <div each="subject in model.subjects">
                    <div each="book in model.booksBySubject(subject)" class="how-using">
                        <div if="model.bookIsSelected[book.value]" class="invalid">
                            How are you using {book.text}?
                            <label each="sfOption in model.salesforce.adoption(['adopted', 'recommended'])">
                                <input
                                 type="radio"
                                 name="{'00NU00000055spw' + book.value}"
                                 value="{sfOption.value}"
                                 required
                                >
                                {sfOption.text}
                            </label>
                            <div class="validation-message">
                                { model.validationMessageFromSelector('[type="radio"][name="'+ book.value + '"]') }
                            </div>
                        </div>
                    </div>
                </div>
                <br>
                <div class="flexrow">
                    <button type="button" class="btn secondary back">Back</button>
                    <button type="button" class="btn primary next">Next</button>
                </div>
            </div>
            <div
                class="grouping {model.currentSection === 3 ? '' : 'hidden'}"
            >
                <h2>Tell us about the technology you use.</h2>
                <div class="hint">Check all that apply</div>
                <div class="two-columns partner-checkboxes" skip="true"></div>
                <div  class="{model.showOtherBlank ? '' : 'hidden'}">
                    <plug-in data-id="otherPartner" skip="true"></plug-in>
                </div>
                <div class="flexrow">
                    <button type="button" class="btn secondary back">Back</button>
                    <button type="submit" class="btn primary">Submit</button>
                </div>
            </div>
            <div
                class="grouping {model.currentSection === 4 ? '' : 'hidden'}"
            >
                <plug-in data-id="partnerContact" skip="true"></plug-in>
                <plug-in data-id="featureMe" skip="true"></plug-in>
                <plug-in data-id="contactMe" skip="true"></plug-in>
                <div class="flexrow">
                    <button type="button" class="btn secondary back" disabled={model.submitting}>Back</button>
                    <button type="submit" class="btn primary" disabled={model.submitting}>Submit</button>
                </div>
            </div>
        </div>
    </form>
</template>
